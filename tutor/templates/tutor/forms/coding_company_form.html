<!-- templates/tutor/forms/coding_company_form.html -->
<div class="max-w-3xl">
  <!-- Header -->
  <div class="dark-card rounded-2xl p-8 mb-8 hover-lift">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <div class="w-14 h-14 bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-xl flex items-center justify-center mr-4">
          <i class="ri-building-line text-3xl text-orange-400"></i>
        </div>
        <div>
          <h2 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-400 brand-font">
            {% if edit_coding_company_id %}Edit{% else %}Add{% endif %} Company
          </h2>
          <p class="text-sm text-slate-400 mt-1">Companies that ask coding interview questions</p>
        </div>
      </div>
      <a href="{% url 'tutor:dashboard' %}" class="w-10 h-10 glass rounded-lg flex items-center justify-center hover:bg-white/10 transition-all hover-lift group">
        <i class="ri-close-line text-xl text-slate-400 group-hover:text-slate-200"></i>
      </a>
    </div>
  </div>

  <!-- Form -->
  <div class="dark-card rounded-2xl p-8 mb-8 hover-lift">
    <form method="POST" action="{% url 'tutor:create_update' %}" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}
      <input type="hidden" name="content_type" value="coding_company">
      {% if edit_coding_company_id %}
        <input type="hidden" name="coding_company_id" value="{{ edit_coding_company_id }}">
      {% endif %}

      <!-- Company Name -->
      <div>
        <label for="{{ coding_company_form.name.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Company Name <span class="text-red-400">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <i class="ri-building-line text-slate-400"></i>
          </div>
          {{ coding_company_form.name }}
        </div>
        {% if coding_company_form.name.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ coding_company_form.name.errors.0 }}</span>
          </div>
        {% endif %}
        <p class="mt-2 text-xs text-slate-500 flex items-center">
          <i class="ri-information-line mr-1"></i>
          e.g., Google, Amazon, Microsoft, Meta
        </p>
      </div>

      <!-- Slug -->
      <div>
        <label for="{{ coding_company_form.slug.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Slug <span class="text-red-400">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <i class="ri-link text-slate-400"></i>
          </div>
          {{ coding_company_form.slug }}
        </div>
        {% if coding_company_form.slug.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ coding_company_form.slug.errors.0 }}</span>
          </div>
        {% endif %}
        <p class="mt-2 text-xs text-slate-500 flex items-center">
          <i class="ri-information-line mr-1"></i>
          URL-friendly version (e.g., google, amazon)
        </p>
      </div>

      <!-- Logo -->
      <div>
        <label for="{{ coding_company_form.logo.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Company Logo
        </label>
        <div class="glass rounded-xl p-4 border border-slate-700/50">
          <div class="flex items-center space-x-4">
            <div class="flex-shrink-0">
              <div class="w-12 h-12 bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-lg flex items-center justify-center">
                <i class="ri-image-line text-2xl text-orange-400"></i>
              </div>
            </div>
            <div class="flex-1">
              {{ coding_company_form.logo }}
            </div>
          </div>
          
          {% if edit_coding_company_id and coding_company_form.instance.logo %}
          <div class="mt-4 pt-4 border-t border-slate-700/50">
            <p class="text-sm text-slate-400 mb-3">Current logo:</p>
            <img src="{{ coding_company_form.instance.logo.url }}" 
                 alt="{{ coding_company_form.instance.name }}" 
                 class="w-20 h-20 object-contain glass rounded-xl p-2 border border-slate-700/50">
          </div>
          {% endif %}
        </div>
        {% if coding_company_form.logo.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ coding_company_form.logo.errors.0 }}</span>
          </div>
        {% endif %}
        <p class="mt-2 text-xs text-slate-500 flex items-center">
          <i class="ri-information-line mr-1"></i>
          Upload company logo (optional)
        </p>
      </div>

      <!-- Website -->
      <div>
        <label for="{{ coding_company_form.website.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Website URL
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <i class="ri-global-line text-slate-400"></i>
          </div>
          {{ coding_company_form.website }}
        </div>
        {% if coding_company_form.website.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ coding_company_form.website.errors.0 }}</span>
          </div>
        {% endif %}
        <p class="mt-2 text-xs text-slate-500 flex items-center">
          <i class="ri-information-line mr-1"></i>
          Company careers or official website
        </p>
      </div>

      <!-- Buttons -->
      <div class="flex items-center gap-3 pt-6">
        <button type="submit" class="px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-slate-900 transition-all shadow-lg hover-lift">
          <i class="ri-{% if edit_coding_company_id %}refresh-line{% else %}add-line{% endif %} mr-2"></i>
          {% if edit_coding_company_id %}Update{% else %}Add{% endif %} Company
        </button>
        <a href="{% url 'tutor:dashboard' %}" class="px-6 py-3 glass border border-slate-600 text-slate-300 font-medium rounded-xl hover:bg-white/10 transition-all hover-lift">
          <i class="ri-close-line mr-2"></i>Cancel
        </a>
      </div>
    </form>
  </div>

  <!-- Existing Companies -->
  {% if coding_companies %}
  <div class="dark-card rounded-2xl p-8 hover-lift">
    <div class="flex items-center mb-6">
      <div class="w-12 h-12 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl flex items-center justify-center mr-4">
        <i class="ri-building-2-line text-2xl text-purple-400"></i>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-slate-100 brand-font">Existing Companies</h3>
        <p class="text-sm text-slate-400">{{ coding_companies|length }} compan{{ coding_companies|length|pluralize:"y,ies" }}</p>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
      {% for company in coding_companies %}
      <div class="glass rounded-xl p-5 hover:bg-white/10 transition-all duration-200 border border-slate-700/50 group">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4 flex-1 min-w-0">
            {% if company.logo %}
            <div class="w-12 h-12 glass rounded-lg flex items-center justify-center p-2 border border-slate-700/30">
              <img src="{{ company.logo.url }}" alt="{{ company.name }}" class="w-full h-full object-contain">
            </div>
            {% else %}
            <div class="w-12 h-12 bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-lg flex items-center justify-center">
              <i class="ri-building-line text-2xl text-orange-400"></i>
            </div>
            {% endif %}
            <div class="flex-1 min-w-0">
              <p class="font-semibold text-slate-100 text-lg group-hover:text-orange-400 transition-colors truncate">
                {{ company.name }}
              </p>
              <p class="text-sm text-slate-400">
                <i class="ri-code-s-slash-line mr-1"></i>
                {{ company.problem_count }} problem{{ company.problem_count|pluralize }}
              </p>
            </div>
          </div>
          <a href="?edit_coding_company={{ company.id }}" class="ml-4 px-4 py-2 glass border border-slate-600 text-slate-300 rounded-lg hover:bg-white/10 transition-all text-sm font-medium hover-lift whitespace-nowrap">
            <i class="ri-edit-line mr-1"></i>Edit
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</div>

<style>
  /* Custom file input styling */
  input[type="file"] {
    color: rgb(226, 232, 240);
    font-size: 0.875rem;
  }

  input[type="file"]::file-selector-button {
    padding: 0.5rem 1rem;
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 0.5rem;
    color: rgb(96, 165, 250);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    margin-right: 1rem;
  }

  input[type="file"]::file-selector-button:hover {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.5);
  }

  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(45deg, #6366f1, #8b5cf6);
    border-radius: 10px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(45deg, #4f46e5, #7c3aed);
  }
</style>