<!-- templates/tutor/forms/problem_form.html -->
<div class="max-w-4xl">
  <!-- Header -->
  <div class="dark-card rounded-2xl p-8 mb-8 hover-lift">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <div class="w-14 h-14 bg-gradient-to-br from-teal-500/20 to-fuchsia-500/20 rounded-xl flex items-center justify-center mr-4">
          <i class="ri-question-answer-line text-3xl text-teal-400"></i>
        </div>
        <div>
          <h2 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-fuchsia-400 brand-font">
            {% if edit_aptitude_problem_id %}Edit{% else %}Create{% endif %} Aptitude Problem
          </h2>
          <p class="text-sm text-slate-400 mt-1">Multiple choice aptitude question</p>
        </div>
      </div>
      <a href="{% url 'tutor:dashboard' %}" class="w-10 h-10 glass rounded-lg flex items-center justify-center hover:bg-white/10 transition-all hover-lift group">
        <i class="ri-close-line text-xl text-slate-400 group-hover:text-slate-200"></i>
      </a>
    </div>
  </div>

  <!-- Form -->
  <div class="dark-card rounded-2xl p-8 hover-lift">
    <form method="POST" action="{% url 'tutor:create_update' %}" class="space-y-6">
      {% csrf_token %}
      <input type="hidden" name="content_type" value="problem">
      {% if edit_aptitude_problem_id %}
        <input type="hidden" name="problem_id" value="{{ edit_aptitude_problem_id }}">
      {% endif %}

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Topic Selection -->
        <div>
          <label for="{{ aptitude_problem_form.topic.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
            Topic <span class="text-red-400">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <i class="ri-price-tag-3-line text-slate-400"></i>
            </div>
            {{ aptitude_problem_form.topic }}
          </div>
          {% if aptitude_problem_form.topic.errors %}
            <div class="mt-2 flex items-center text-red-400 text-sm">
              <i class="ri-error-warning-line mr-1"></i>
              <span>{{ aptitude_problem_form.topic.errors.0 }}</span>
            </div>
          {% endif %}
        </div>

        <!-- Difficulty -->
        <div>
          <label for="{{ aptitude_problem_form.difficulty.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
            Difficulty <span class="text-red-400">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <i class="ri-bar-chart-line text-slate-400"></i>
            </div>
            {{ aptitude_problem_form.difficulty }}
          </div>
          {% if aptitude_problem_form.difficulty.errors %}
            <div class="mt-2 flex items-center text-red-400 text-sm">
              <i class="ri-error-warning-line mr-1"></i>
              <span>{{ aptitude_problem_form.difficulty.errors.0 }}</span>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Question Text -->
      <div>
        <label for="{{ aptitude_problem_form.question_text.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Question Text <span class="text-red-400">*</span>
        </label>
        <div class="relative">
          <div class="absolute top-4 left-0 pl-4 pointer-events-none">
            <i class="ri-question-line text-slate-400"></i>
          </div>
          {{ aptitude_problem_form.question_text }}
        </div>
        {% if aptitude_problem_form.question_text.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ aptitude_problem_form.question_text.errors.0 }}</span>
          </div>
        {% endif %}
      </div>

      <!-- Options Section -->
      <div class="glass rounded-xl p-6 border border-slate-700/50">
        <h3 class="text-lg font-semibold text-slate-100 mb-4 flex items-center">
          <i class="ri-list-check text-teal-400 mr-2"></i>
          Answer Options
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Option A -->
          <div>
            <label for="{{ aptitude_problem_form.option_a.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
              Option A <span class="text-red-400">*</span>
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <span class="text-slate-400 font-bold">A</span>
              </div>
              {{ aptitude_problem_form.option_a }}
            </div>
            {% if aptitude_problem_form.option_a.errors %}
              <div class="mt-2 flex items-center text-red-400 text-sm">
                <i class="ri-error-warning-line mr-1"></i>
                <span>{{ aptitude_problem_form.option_a.errors.0 }}</span>
              </div>
            {% endif %}
          </div>

          <!-- Option B -->
          <div>
            <label for="{{ aptitude_problem_form.option_b.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
              Option B <span class="text-red-400">*</span>
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <span class="text-slate-400 font-bold">B</span>
              </div>
              {{ aptitude_problem_form.option_b }}
            </div>
            {% if aptitude_problem_form.option_b.errors %}
              <div class="mt-2 flex items-center text-red-400 text-sm">
                <i class="ri-error-warning-line mr-1"></i>
                <span>{{ aptitude_problem_form.option_b.errors.0 }}</span>
              </div>
            {% endif %}
          </div>

          <!-- Option C -->
          <div>
            <label for="{{ aptitude_problem_form.option_c.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
              Option C <span class="text-red-400">*</span>
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <span class="text-slate-400 font-bold">C</span>
              </div>
              {{ aptitude_problem_form.option_c }}
            </div>
            {% if aptitude_problem_form.option_c.errors %}
              <div class="mt-2 flex items-center text-red-400 text-sm">
                <i class="ri-error-warning-line mr-1"></i>
                <span>{{ aptitude_problem_form.option_c.errors.0 }}</span>
              </div>
            {% endif %}
          </div>

          <!-- Option D -->
          <div>
            <label for="{{ aptitude_problem_form.option_d.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
              Option D <span class="text-red-400">*</span>
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <span class="text-slate-400 font-bold">D</span>
              </div>
              {{ aptitude_problem_form.option_d }}
            </div>
            {% if aptitude_problem_form.option_d.errors %}
              <div class="mt-2 flex items-center text-red-400 text-sm">
                <i class="ri-error-warning-line mr-1"></i>
                <span>{{ aptitude_problem_form.option_d.errors.0 }}</span>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Correct Answer -->
      <div>
        <label for="{{ aptitude_problem_form.correct_option.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Correct Answer <span class="text-red-400">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <i class="ri-checkbox-circle-line text-slate-400"></i>
          </div>
          {{ aptitude_problem_form.correct_option }}
        </div>
        {% if aptitude_problem_form.correct_option.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ aptitude_problem_form.correct_option.errors.0 }}</span>
          </div>
        {% endif %}
      </div>

      <!-- Explanation -->
      <div>
        <label for="{{ aptitude_problem_form.explanation.id_for_label }}" class="block text-sm font-semibold text-slate-200 mb-3">
          Explanation
        </label>
        <div class="relative">
          <div class="absolute top-4 left-0 pl-4 pointer-events-none">
            <i class="ri-lightbulb-line text-slate-400"></i>
          </div>
          {{ aptitude_problem_form.explanation }}
        </div>
        {% if aptitude_problem_form.explanation.errors %}
          <div class="mt-2 flex items-center text-red-400 text-sm">
            <i class="ri-error-warning-line mr-1"></i>
            <span>{{ aptitude_problem_form.explanation.errors.0 }}</span>
          </div>
        {% endif %}
        <p class="mt-2 text-xs text-slate-500 flex items-center">
          <i class="ri-information-line mr-1"></i>
          Detailed explanation of the solution
        </p>
      </div>

      <!-- Buttons -->
      <div class="flex items-center gap-3 pt-6">
        <button type="submit" class="px-6 py-3 bg-gradient-to-r from-teal-500 to-fuchsia-600 text-white font-semibold rounded-xl hover:from-teal-600 hover:to-fuchsia-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:ring-offset-slate-900 transition-all shadow-lg hover-lift">
          <i class="ri-{% if edit_aptitude_problem_id %}refresh-line{% else %}add-line{% endif %} mr-2"></i>
          {% if edit_aptitude_problem_id %}Update{% else %}Create{% endif %} Problem
        </button>
        <a href="{% url 'tutor:dashboard' %}" class="px-6 py-3 glass border border-slate-600 text-slate-300 font-medium rounded-xl hover:bg-white/10 transition-all hover-lift">
          <i class="ri-close-line mr-2"></i>Cancel
        </a>
      </div>
    </form>
  </div>
</div>