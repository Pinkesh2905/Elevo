{% extends 'base.html' %}

{% block title %}My Submissions | Practice | Elevo{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-6 flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-white">My Submissions</h1>
      <p class="text-slate-300 mt-2">Track attempt quality and revisit failed runs quickly.</p>
    </div>
    <a href="{% url 'practice:problem-list' %}" class="px-4 py-2 rounded-xl border border-slate-600 text-slate-300 hover:border-teal-400 hover:text-teal-300">Go to Problems</a>
  </div>

  <div class="rounded-2xl border border-slate-700 overflow-hidden bg-slate-900/60">
    <div class="overflow-x-auto">
      <table class="w-full min-w-[760px]">
        <thead class="bg-slate-800/80 text-slate-300 text-xs uppercase tracking-wide">
          <tr>
            <th class="px-4 py-3 text-left">Problem</th>
            <th class="px-4 py-3 text-left">Language</th>
            <th class="px-4 py-3 text-left">Status</th>
            <th class="px-4 py-3 text-left">Passed</th>
            <th class="px-4 py-3 text-left">Created</th>
            <th class="px-4 py-3 text-right">Action</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-800 text-sm">
          {% for submission in page_obj %}
          <tr class="hover:bg-slate-800/40">
            <td class="px-4 py-4 text-slate-100 font-medium">{{ submission.problem.problem_number }}. {{ submission.problem.title }}</td>
            <td class="px-4 py-4 text-slate-300">{{ submission.language }}</td>
            <td class="px-4 py-4">
              {% if submission.status == 'accepted' %}
                <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-emerald-500/15 text-emerald-300 border border-emerald-500/30">Accepted</span>
              {% elif submission.status == 'wrong_answer' %}
                <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-yellow-500/15 text-yellow-300 border border-yellow-500/30">Wrong Answer</span>
              {% else %}
                <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-red-500/15 text-red-300 border border-red-500/30">{{ submission.get_status_display }}</span>
              {% endif %}
            </td>
            <td class="px-4 py-4 text-slate-300">{{ submission.passed_test_cases }}/{{ submission.total_test_cases }}</td>
            <td class="px-4 py-4 text-slate-400">{{ submission.created_at|date:"M d, Y H:i" }}</td>
            <td class="px-4 py-4 text-right">
              <a href="{% url 'practice:submission_detail' submission.id %}" class="inline-flex items-center gap-1 px-3 py-2 rounded-lg bg-slate-800 border border-slate-600 text-slate-200 hover:border-teal-400 hover:text-teal-300">
                View <i class="ri-arrow-right-line"></i>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="px-6 py-12 text-center text-slate-400">No submissions yet. Start solving problems to build history.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {% if page_obj.paginator.num_pages > 1 %}
  <div class="mt-6 flex items-center justify-between text-sm">
    <div class="text-slate-400">Showing {{ page_obj.start_index }}-{{ page_obj.end_index }} of {{ page_obj.paginator.count }}</div>
    <div class="flex items-center gap-2">
      {% if page_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-2 rounded-lg border border-slate-600 text-slate-300">Previous</a>{% endif %}
      <span class="px-3 py-2 rounded-lg bg-slate-800 text-slate-200">{{ page_obj.number }}</span>
      {% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}" class="px-3 py-2 rounded-lg border border-slate-600 text-slate-300">Next</a>{% endif %}
    </div>
  </div>
  {% endif %}
</section>
{% endblock %}
