{% extends 'base.html' %}

{% block title %}MockMate - Master Your Tech Career{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative min-h-screen flex items-center justify-center overflow-hidden">
  <!-- Dynamic background overlay -->
  <div class="absolute inset-0 bg-gradient-to-br from-slate-900/40 via-indigo-900/30 to-purple-900/40"></div>
  
  <div class="relative z-10 text-center max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Main headline with gradient animation -->
    <h1 class="text-6xl md:text-7xl lg:text-8xl font-bold text-white mb-10 leading-tight">
      Master Your
      <span class="text-transparent bg-clip-text animated-gradient brand-font block mt-2">
        Tech Future
      </span>
    </h1>
    
    <!-- Enhanced subtitle -->
    <div class="text-2xl md:text-3xl text-slate-300 mb-16 max-w-4xl mx-auto leading-relaxed font-medium">
      Code. Learn. Succeed. Land your dream job.
    </div>
    
    <!-- Simplified CTA buttons -->
    <div class="flex flex-col sm:flex-row gap-6 justify-center mb-20">
      {% if not user.is_authenticated %}
        <a href="{% url 'users:signup' %}" class="group px-10 py-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-rocket-line mr-3"></i>
            Launch Career
            <i class="ri-arrow-right-line ml-3 group-hover:translate-x-1 transition-transform duration-300"></i>
          </span>
        </a>
        <a href="#features" class="group px-10 py-4 glass border-2 border-white/30 text-white rounded-xl hover:bg-white/10 hover:border-indigo-400/50 transition-all duration-300 font-bold text-lg hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-code-view mr-3"></i>
            Explore Platform
            <i class="ri-arrow-down-line ml-3 group-hover:translate-y-1 transition-transform duration-300"></i>
          </span>
        </a>
      {% else %}
        <a href="{% url 'practice:problem-list' %}" class="group px-10 py-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-code-s-slash-line mr-3"></i>
            Continue Coding
            <i class="ri-arrow-right-line ml-3 group-hover:translate-x-1 transition-transform duration-300"></i>
          </span>
        </a>
        <a href="{% url 'mock_interview:interview_setup' %}" class="group px-10 py-4 glass border-2 border-white/30 text-white rounded-xl hover:bg-white/10 hover:border-cyan-400/50 transition-all duration-300 font-bold text-lg hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-robot-line mr-3"></i>
            AI Interview
          </span>
        </a>
      {% endif %}
    </div>
    
    <!-- Trust indicators -->
    <div class="flex flex-wrap items-center justify-center gap-8 text-slate-300">
      <div class="flex items-center glass px-6 py-3 rounded-xl border border-amber-400/20 hover:border-amber-400/40 transition-all duration-300">
        <i class="ri-star-fill text-amber-400 mr-2 text-lg"></i>
        <span class="font-semibold">4.9â˜… Rating</span>
      </div>
      <div class="flex items-center glass px-6 py-3 rounded-xl border border-indigo-400/20 hover:border-indigo-400/40 transition-all duration-300">
        <i class="ri-group-line mr-2 text-indigo-400 text-lg"></i>
        <span class="font-semibold">25K+ Coders</span>
      </div>
      <div class="flex items-center glass px-6 py-3 rounded-xl border border-emerald-400/20 hover:border-emerald-400/40 transition-all duration-300">
        <i class="ri-trophy-line mr-2 text-emerald-400 text-lg"></i>
        <span class="font-semibold">95% Success</span>
      </div>
    </div>
  </div>
</section>

<!-- Features Section -->
<section id="features" class="py-24 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-slate-900/60 to-indigo-900/30"></div>
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
    <div class="text-center mb-20">
      <div class="inline-flex items-center px-6 py-3 rounded-xl glass border border-purple-400/30 mb-8">
        <i class="ri-code-box-line mr-3 text-purple-400"></i>
        <span class="text-slate-200 font-semibold">Platform Features</span>
      </div>
      <h2 class="text-5xl md:text-6xl font-bold text-white mb-8">
        Everything for Your
        <span class="text-transparent bg-clip-text animated-gradient brand-font">Success Journey</span>
      </h2>
      <p class="text-2xl text-slate-300 max-w-3xl mx-auto leading-relaxed">
        Comprehensive tools designed for modern tech interview mastery
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Coding Problems -->
      <div class="feature-card group">
        <div class="feature-card-inner">
          <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
          <div class="relative p-8">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <i class="ri-code-s-slash-line text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-white mb-4 brand-font group-hover:text-indigo-400 transition-colors duration-300">
              Coding Problems
            </h3>
            <p class="text-slate-300 mb-6 leading-relaxed">
              Master algorithms and data structures with 1200+ curated problems from top tech companies.
            </p>
            
            <div class="space-y-3 mb-6">
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Company-specific questions
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Multiple language support
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Detailed explanations
              </div>
            </div>
            
            <a href="{% url 'practice:problem-list' %}" class="inline-flex items-center px-5 py-2.5 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-all duration-300 group-hover:translate-x-1">
              Start Coding
              <i class="ri-arrow-right-line ml-2"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Aptitude Tests -->
      <div class="feature-card group">
        <div class="feature-card-inner">
          <div class="absolute inset-0 bg-gradient-to-br from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
          <div class="relative p-8">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <i class="ri-brain-line text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-white mb-4 brand-font group-hover:text-purple-400 transition-colors duration-300">
              Aptitude Tests
            </h3>
            <p class="text-slate-300 mb-6 leading-relaxed">
              Sharpen logical reasoning, quantitative skills, and verbal ability with targeted assessments.
            </p>
            
            <div class="space-y-3 mb-6">
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Logical reasoning puzzles
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Quantitative analysis
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Verbal comprehension
              </div>
            </div>
            
            <a href="{% url 'aptitude:dashboard' %}" class="inline-flex items-center px-5 py-2.5 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-all duration-300 group-hover:translate-x-1">
              Take Tests
              <i class="ri-arrow-right-line ml-2"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Community Hub -->
      <div class="feature-card group">
        <div class="feature-card-inner">
          <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-teal-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
          <div class="relative p-8">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <i class="ri-team-line text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-white mb-4 brand-font group-hover:text-emerald-400 transition-colors duration-300">
              Community Hub
            </h3>
            <p class="text-slate-300 mb-6 leading-relaxed">
              Connect with mentors, peers, and successful candidates in our thriving tech community.
            </p>
            
            <div class="space-y-3 mb-6">
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Expert mentorship
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Industry insights
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Peer networking
              </div>
            </div>
            
            <a href="{% url 'posts:feed' %}" class="inline-flex items-center px-5 py-2.5 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-all duration-300 group-hover:translate-x-1">
              Join Community
              <i class="ri-arrow-right-line ml-2"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- AI Mock Interviews -->
      <div class="feature-card group">
        <div class="feature-card-inner">
          <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
          <div class="relative p-8">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <i class="ri-robot-2-line text-white text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-white mb-4 brand-font group-hover:text-cyan-400 transition-colors duration-300">
              AI Interviews
            </h3>
            <p class="text-slate-300 mb-6 leading-relaxed">
              Practice with realistic AI-powered interviews and receive detailed performance feedback.
            </p>
            
            <div class="space-y-3 mb-6">
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Real-time AI feedback
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Company scenarios
              </div>
              <div class="flex items-center text-emerald-400 text-sm font-medium">
                <i class="ri-check-line mr-2"></i>
                Performance analytics
              </div>
            </div>
            
            <a href="{% url 'mock_interview:interview_setup' %}" class="inline-flex items-center px-5 py-2.5 bg-cyan-600 text-white rounded-lg font-semibold hover:bg-cyan-700 transition-all duration-300 group-hover:translate-x-1">
              Book Session
              <i class="ri-arrow-right-line ml-2"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="py-24 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-indigo-900/40 to-purple-900/40"></div>
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
    <div class="text-center mb-20">
      <h2 class="text-5xl font-bold text-white mb-6">
        Proven <span class="text-transparent bg-clip-text animated-gradient brand-font">Results</span>
      </h2>
      <p class="text-2xl text-slate-300">Numbers that speak for themselves</p>
    </div>
    
    <div class="grid grid-cols-2 md:grid-cols-4 gap-10">
      <div class="text-center stats-card">
        <div class="counter text-5xl md:text-6xl font-bold text-white mb-4" data-count="1200">0</div>
        <div class="text-xl text-indigo-400 font-semibold">Coding Problems</div>
        <div class="text-slate-400 mt-2">Curated challenges</div>
      </div>
      <div class="text-center stats-card">
        <div class="counter text-5xl md:text-6xl font-bold text-white mb-4" data-count="500">0</div>
        <div class="text-xl text-purple-400 font-semibold">Aptitude Tests</div>
        <div class="text-slate-400 mt-2">Practice assessments</div>
      </div>
      <div class="text-center stats-card">
        <div class="counter text-5xl md:text-6xl font-bold text-white mb-4" data-count="25000">0</div>
        <div class="text-xl text-emerald-400 font-semibold">Active Students</div>
        <div class="text-slate-400 mt-2">Learning community</div>
      </div>
      <div class="text-center stats-card">
        <div class="counter text-5xl md:text-6xl font-bold text-white mb-4" data-count="95">0</div>
        <div class="text-xl text-amber-400 font-semibold">Success Rate %</div>
        <div class="text-slate-400 mt-2">Job placements</div>
      </div>
    </div>
  </div>
</section>

<!-- Success Stories -->
<section class="py-24 relative">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-20">
      <h2 class="text-5xl font-bold text-white mb-8">
        Success <span class="text-transparent bg-clip-text animated-gradient brand-font">Stories</span>
      </h2>
      <p class="text-2xl text-slate-300">Real achievements from our community</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Testimonial 1 -->
      <div class="testimonial-card group">
        <div class="glass-elevated rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-indigo-400/30">
          <div class="flex items-center mb-6">
            <div class="w-14 h-14 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg">
              A
            </div>
            <div class="ml-4">
              <h4 class="font-bold text-white text-lg">Arjun Patel</h4>
              <p class="text-indigo-400 font-medium text-sm">Software Engineer @ Google</p>
            </div>
          </div>
          <div class="flex text-amber-400 mb-4">
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
          </div>
          <p class="text-slate-300 leading-relaxed">"MockMate's structured coding approach and comprehensive problem set were instrumental in my Google interview success."</p>
        </div>
      </div>
      
      <!-- Testimonial 2 -->
      <div class="testimonial-card group">
        <div class="glass-elevated rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-purple-400/30">
          <div class="flex items-center mb-6">
            <div class="w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg">
              P
            </div>
            <div class="ml-4">
              <h4 class="font-bold text-white text-lg">Priya Sharma</h4>
              <p class="text-purple-400 font-medium text-sm">Product Manager @ Microsoft</p>
            </div>
          </div>
          <div class="flex text-amber-400 mb-4">
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
          </div>
          <p class="text-slate-300 leading-relaxed">"The community mentorship and AI interviews gave me the confidence and insights needed for my Microsoft PM role."</p>
        </div>
      </div>
      
      <!-- Testimonial 3 -->
      <div class="testimonial-card group">
        <div class="glass-elevated rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-emerald-400/30">
          <div class="flex items-center mb-6">
            <div class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center text-white font-bold text-lg">
              R
            </div>
            <div class="ml-4">
              <h4 class="font-bold text-white text-lg">Rahul Singh</h4>
              <p class="text-emerald-400 font-medium text-sm">SDE @ Amazon</p>
            </div>
          </div>
          <div class="flex text-amber-400 mb-4">
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
            <i class="ri-star-fill"></i>
          </div>
          <p class="text-slate-300 leading-relaxed">"From campus coding contests to Amazon SDE - MockMate's mock interviews were absolute game-changers."</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Final CTA -->
<section class="py-24 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-slate-900/70 via-indigo-900/50 to-purple-900/70"></div>
  
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative text-center">
    <h2 class="text-5xl md:text-6xl font-bold text-white mb-8">
      Ready to Code Your
      <span class="text-transparent bg-clip-text animated-gradient brand-font block mt-2">
        Success Story?
      </span>
    </h2>
    
    <p class="text-2xl text-slate-300 mb-16 max-w-4xl mx-auto leading-relaxed">
      Join the community of successful developers and start your journey today
    </p>
    
    <div class="flex flex-col sm:flex-row gap-6 justify-center">
      {% if not user.is_authenticated %}
        <a href="{% url 'users:signup' %}" class="group px-12 py-5 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-code-line mr-3"></i>
            Start Coding Now
            <i class="ri-arrow-right-line ml-3 group-hover:translate-x-1 transition-transform duration-300"></i>
          </span>
        </a>
        <a href="{% url 'login' %}" class="group px-12 py-5 glass border-2 border-white/30 text-white rounded-xl hover:bg-white/10 hover:border-indigo-400/50 font-bold text-xl transition-all duration-300 hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-login-box-line mr-3"></i>
            Sign In
          </span>
        </a>
      {% else %}
        <a href="{% url 'practice:problem-list' %}" class="group px-12 py-5 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <span class="flex items-center justify-center">
            <i class="ri-code-s-slash-line mr-3"></i>
            Continue Coding
            <i class="ri-arrow-right-line ml-3 group-hover:translate-x-1 transition-transform duration-300"></i>
          </span>
        </a>
      {% endif %}
    </div>
  </div>
</section>

<style>
/* Animated Gradient Text */
@keyframes gradientShift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animated-gradient {
  background: linear-gradient(-45deg, #6366f1, #8b5cf6, #06b6d4, #10b981);
  background-size: 400% 400%;
  animation: gradientShift 8s ease infinite;
  -webkit-background-clip: text;
  background-clip: text;
}

/* Feature Cards - Enhanced Styling */
.feature-card {
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.feature-card-inner {
  position: relative;
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 1rem;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  height: 100%;
}

.feature-card:hover .feature-card-inner {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  border-color: rgba(99, 102, 241, 0.3);
  background: rgba(255, 255, 255, 0.06);
}

/* Subtle entrance animation for cards */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.feature-card {
  animation: fadeInUp 0.6s ease-out forwards;
  opacity: 0;
}

.feature-card:nth-child(1) { animation-delay: 0.1s; }
.feature-card:nth-child(2) { animation-delay: 0.2s; }
.feature-card:nth-child(3) { animation-delay: 0.3s; }
.feature-card:nth-child(4) { animation-delay: 0.4s; }

/* Counter Animation */
.counter {
  display: inline-block;
  transition: all 0.3s ease;
}

/* Stats Card Animation */
@keyframes statsSlideIn {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stats-card {
  animation: statsSlideIn 0.8s ease-out forwards;
  opacity: 0;
}

.stats-card:nth-child(1) { animation-delay: 0.1s; }
.stats-card:nth-child(2) { animation-delay: 0.2s; }
.stats-card:nth-child(3) { animation-delay: 0.3s; }
.stats-card:nth-child(4) { animation-delay: 0.4s; }

/* Testimonial Cards */
.testimonial-card {
  animation: fadeInUp 0.6s ease-out forwards;
  opacity: 0;
}

.testimonial-card:nth-child(1) { animation-delay: 0.1s; }
.testimonial-card:nth-child(2) { animation-delay: 0.2s; }
.testimonial-card:nth-child(3) { animation-delay: 0.3s; }

/* Glass Effect Enhancement */
.glass-elevated {
  background: rgba(255, 255, 255, 0.06);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.12);
}

/* Responsive Design */
@media (max-width: 768px) {
  .text-6xl { font-size: 3rem !important; }
  .text-7xl { font-size: 3.5rem !important; }
  .text-8xl { font-size: 4rem !important; }
}

@media (max-width: 640px) {
  .px-10 { padding-left: 2rem; padding-right: 2rem; }
  .px-12 { padding-left: 2.5rem; padding-right: 2.5rem; }
  .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
  .py-5 { padding-top: 1.25rem; padding-bottom: 1.25rem; }
  
  .text-xl { font-size: 1.125rem !important; }
  .text-2xl { font-size: 1.25rem !important; }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Counter Animation
  function animateCounter(element) {
    const target = parseInt(element.getAttribute('data-count'));
    const duration = 2000;
    const start = performance.now();
    const startValue = 0;

    function updateCounter(currentTime) {
      const elapsed = currentTime - start;
      const progress = Math.min(elapsed / duration, 1);
      const currentValue = Math.floor(progress * (target - startValue) + startValue);
      
      if (target > 1000) {
        element.textContent = (currentValue / 1000).toFixed(0) + 'K+';
      } else {
        element.textContent = currentValue + (target === 95 ? '%' : '');
      }

      if (progress < 1) {
        requestAnimationFrame(updateCounter);
      }
    }

    requestAnimationFrame(updateCounter);
  }

  // Intersection Observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Counter animation
        if (entry.target.classList.contains('stats-card')) {
          const counter = entry.target.querySelector('.counter');
          if (counter && !counter.dataset.animated) {
            counter.dataset.animated = 'true';
            setTimeout(() => animateCounter(counter), 200);
          }
        }
      }
    });
  }, observerOptions);

  // Observe elements
  document.querySelectorAll('.stats-card').forEach(el => {
    observer.observe(el);
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

  // Pause animations on reduced motion preference
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    document.querySelectorAll('*').forEach(el => {
      el.style.animationDuration = '0.01ms';
      el.style.transitionDuration = '0.01ms';
    });
  }
});
</script>

{% endblock %}