{% extends 'base.html' %}

{% block title %}Elevo | Build Interview Momentum{% endblock %}

{% block content %}
<style>
  .home-shell {
    position: relative;
    overflow: hidden;
  }

  .hero-title {
    font-family: 'Outfit', sans-serif;
    letter-spacing: -0.04em;
    line-height: 0.9;
    font-weight: 900;
  }

  .eyebrow {
    font-family: 'Fira Code', monospace;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }

  .home-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-primary);
  }

  .home-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: rgba(99, 102, 241, 0.4);
    box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5), 0 0 20px rgba(99, 102, 241, 0.2);
    background: rgba(30, 41, 59, 0.7);
  }

  .cta-primary {
    background: var(--primary-gradient);
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .cta-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
    z-index: -1;
  }

  .cta-primary:hover::before {
    transform: translateX(100%);
  }

  .accent-line {
    background: var(--primary-gradient);
    box-shadow: var(--accent-glow);
  }

  /* Career Console Styles */
  .console-wrapper {
    background: #000;
    border: 1px solid #1e293b;
    border-radius: 12px;
    font-family: 'Fira Code', monospace;
    overflow: hidden;
    position: relative;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
  }

  .console-header {
    background: #1e293b;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .console-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .console-body {
    padding: 16px;
    color: #4ade80;
    font-size: 14px;
    min-height: 200px;
    line-height: 1.6;
  }

  .console-cursor {
    display: inline-block;
    width: 8px;
    height: 16px;
    background: #4ade80;
    margin-left: 4px;
    animation: blink 1s infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Company Marquee */
  .marquee {
    overflow: hidden;
    white-space: nowrap;
    position: relative;
    background: rgba(2, 6, 23, 0.4);
    padding: 20px 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
  }

  .marquee-content {
    display: inline-block;
    animation: marquee 30s linear infinite;
  }

  @keyframes marquee {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
  }

  .company-logo {
    display: inline-block;
    margin: 0 40px;
    color: var(--text-secondary);
    font-weight: 700;
    font-size: 18px;
    opacity: 0.6;
    transition: opacity 0.3s;
  }

  .company-logo:hover {
    opacity: 1;
  }

  .reveal-text {
    opacity: 0;
    transform: translateY(30px);
  }

  .reveal-card {
    opacity: 0;
    transform: scale(0.9);
  }
</style>

<div class="home-shell">
  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-12 lg:pt-24 lg:pb-20">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-14 items-center">
      <div>
        <p class="eyebrow text-sky-400 text-xs sm:text-sm mb-5 reveal-text">career prep operating system</p>
        <h1 class="hero-title text-6xl sm:text-7xl lg:text-8xl text-white mb-8 reveal-text">
          From Practice
          <span class="block text-transparent bg-clip-text bg-gradient-to-r from-sky-400 via-indigo-400 to-purple-400">To Placement</span>
        </h1>
        <p class="text-slate-400 text-xl sm:text-2xl leading-relaxed max-w-xl mb-10 reveal-text">
          Elevo combines coding drills, aptitude training, and AI interviews in one focused workflow for real hiring outcomes.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 mb-8">
          {% if not user.is_authenticated %}
            <a href="{% url 'users:signup' %}" class="cta-primary text-white px-7 py-3.5 rounded-xl font-semibold inline-flex items-center justify-center">
              <i class="ri-user-add-line mr-2"></i>Create Free Account
            </a>
            <a href="{% url 'login' %}" class="px-7 py-3.5 rounded-xl font-semibold border border-slate-500 text-slate-200 hover:border-teal-300 hover:text-teal-200 transition-colors inline-flex items-center justify-center">
              <i class="ri-login-box-line mr-2"></i>Log In
            </a>
          {% else %}
            <a href="{% url 'practice:problem-list' %}" class="cta-primary text-white px-7 py-3.5 rounded-xl font-semibold inline-flex items-center justify-center">
              <i class="ri-code-s-slash-line mr-2"></i>Continue Practice
            </a>
            <a href="{% url 'mock_interview:interview_setup' %}" class="px-7 py-3.5 rounded-xl font-semibold border border-slate-500 text-slate-200 hover:border-emerald-300 hover:text-emerald-200 transition-colors inline-flex items-center justify-center">
              <i class="ri-robot-2-line mr-2"></i>Start Interview
            </a>
          {% endif %}
        </div>

        <div class="flex flex-wrap gap-3">
          <span class="text-xs px-3 py-1.5 rounded-full bg-sky-500/15 text-sky-200 border border-sky-400/25">Structured Learning</span>
          <span class="text-xs px-3 py-1.5 rounded-full bg-teal-500/15 text-teal-200 border border-teal-400/25">Live Coding Focus</span>
          <span class="text-xs px-3 py-1.5 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-400/25">Interview Readiness</span>
        </div>
      </div>

      <div class="space-y-6">
        <!-- Career Console -->
        <div class="console-wrapper reveal-card">
          <div class="console-header border-b border-slate-800">
            <div class="console-dot bg-red-500"></div>
            <div class="console-dot bg-amber-500"></div>
            <div class="console-dot bg-emerald-500"></div>
            <span class="text-slate-400 text-xs ml-2 font-mono">career_vitals.sh</span>
          </div>
          <div class="console-body" id="careerConsole">
            <div class="console-line">> Initializing Career Protocol...</div>
            <div class="console-line">> Loading user trajectory...</div>
            <div class="console-line">> <span class="text-sky-400">Status:</span> Elevating</div>
          </div>
        </div>

        <!-- Real Stats -->
        <div class="grid grid-cols-2 gap-4">
          <div class="home-card p-5 reveal-card">
            <p class="text-slate-400 text-xs uppercase tracking-widest mb-2">Practice Pool</p>
            <p class="text-3xl font-bold text-white">{{ stats.total_problems }}<span class="text-sky-400 text-sm ml-1">+</span></p>
            <p class="text-[10px] text-slate-500 mt-1 uppercase">Live Problems</p>
          </div>
          <div class="home-card p-5 reveal-card">
            <p class="text-slate-400 text-xs uppercase tracking-widest mb-2">Partner Firms</p>
            <p class="text-3xl font-bold text-white">{{ stats.total_companies }}<span class="text-teal-400 text-sm ml-1">+</span></p>
            <p class="text-[10px] text-slate-500 mt-1 uppercase">Inc. FAANG</p>
          </div>
          <div class="home-card p-5 reveal-card">
            <p class="text-slate-400 text-xs uppercase tracking-widest mb-2">Aptitude Pool</p>
            <p class="text-3xl font-bold text-white">{{ stats.total_questions }}<span class="text-emerald-400 text-sm ml-1">+</span></p>
            <p class="text-[10px] text-slate-500 mt-1 uppercase">Logic Questions</p>
          </div>
          <div class="home-card p-5 reveal-card">
            <p class="text-slate-400 text-xs uppercase tracking-widest mb-2">Candidates</p>
            <p class="text-3xl font-bold text-white">{{ stats.active_users }}<span class="text-purple-400 text-sm ml-1">+</span></p>
            <p class="text-[10px] text-slate-500 mt-1 uppercase">Active Now</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-14">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-3xl sm:text-4xl text-white hero-title">Core Modules</h2>
      <span class="text-sm text-slate-400">each path links to live features</span>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-5">
      <a href="{% url 'practice:problem-list' %}" class="home-card p-6 block">
        <i class="ri-code-box-line text-2xl text-sky-300"></i>
        <h3 class="text-white text-xl font-semibold mt-4 mb-2">Coding Arena</h3>
        <p class="text-slate-300 text-sm leading-relaxed">Solve company-tagged problems, test logic, and improve speed with guided patterns.</p>
      </a>

      <a href="{% url 'aptitude:dashboard' %}" class="home-card p-6 block">
        <i class="ri-brain-line text-2xl text-teal-300"></i>
        <h3 class="text-white text-xl font-semibold mt-4 mb-2">Aptitude Lab</h3>
        <p class="text-slate-300 text-sm leading-relaxed">Strengthen quant, reasoning, and verbal sections used in screening rounds.</p>
      </a>

      <a href="{% url 'posts:feed' %}" class="home-card p-6 block">
        <i class="ri-team-line text-2xl text-emerald-300"></i>
        <h3 class="text-white text-xl font-semibold mt-4 mb-2">Peer Network</h3>
        <p class="text-slate-300 text-sm leading-relaxed">Share progress, ask questions, and learn from others preparing for similar roles.</p>
      </a>

      <a href="{% url 'mock_interview:interview_setup' %}" class="home-card p-6 block">
        <i class="ri-robot-2-line text-2xl text-emerald-300"></i>
        <h3 class="text-white text-xl font-semibold mt-4 mb-2">AI Interview Room</h3>
        <p class="text-slate-300 text-sm leading-relaxed">Practice realistic interview sessions and review detailed, skill-based feedback.</p>
      </a>
    </div>
  </section>

  <!-- Company Marquee -->
  <div class="marquee reveal-text overflow-hidden">
    <div class="marquee-content whitespace-nowrap">
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">GOOGLE</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">AMAZON</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">META</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">APPLE</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">MICROSOFT</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">NETFLIX</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">NVIDIA</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">ADOBE</span>
      <!-- Repeated for seamless loop -->
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">GOOGLE</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">AMAZON</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">META</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">APPLE</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">MICROSOFT</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">NETFLIX</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">NVIDIA</span>
      <span class="company-logo inline-block mx-10 text-slate-500 font-bold opacity-60">ADOBE</span>
    </div>
  </div>

  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-16">
    <div class="home-card p-8 lg:p-10">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div>
          <p class="eyebrow text-teal-300 text-xs mb-3 uppercase">workflow</p>
          <h2 class="hero-title text-4xl text-white">How Elevo Works</h2>
        </div>
        <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-slate-900/55 border border-slate-700 rounded-xl p-5">
            <p class="text-xs text-sky-300 mb-2">STEP 01</p>
            <h3 class="text-white font-semibold mb-2">Build Fundamentals</h3>
            <p class="text-slate-300 text-sm">Practice coding and aptitude daily with topic-focused goals.</p>
          </div>
          <div class="bg-slate-900/55 border border-slate-700 rounded-xl p-5">
            <p class="text-xs text-teal-300 mb-2">STEP 02</p>
            <h3 class="text-white font-semibold mb-2">Simulate Interviews</h3>
            <p class="text-slate-300 text-sm">Run AI sessions that mirror real technical and behavioral rounds.</p>
          </div>
          <div class="bg-slate-900/55 border border-slate-700 rounded-xl p-5">
            <p class="text-xs text-emerald-300 mb-2">STEP 03</p>
            <h3 class="text-white font-semibold mb-2">Track Improvement</h3>
            <p class="text-slate-300 text-sm">Use feedback loops to close gaps before your actual interviews.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20 lg:pb-24">
    <div class="text-center mb-8">
      <h2 class="hero-title text-4xl sm:text-5xl text-white mb-3">Ready To Start?</h2>
      <p class="text-slate-300 text-lg">Turn random prep into a clear weekly system.</p>
    </div>

    <div class="flex flex-col sm:flex-row justify-center gap-4">
      {% if not user.is_authenticated %}
        <a href="{% url 'users:signup' %}" class="cta-primary text-white px-8 py-3.5 rounded-xl font-semibold inline-flex items-center justify-center">
          <i class="ri-flashlight-line mr-2"></i>Start With Elevo
        </a>
      {% else %}
        <a href="{% url 'practice:problem-list' %}" class="cta-primary text-white px-8 py-3.5 rounded-xl font-semibold inline-flex items-center justify-center">
          <i class="ri-play-circle-line mr-2"></i>Resume My Prep
        </a>
      {% endif %}
      <a href="{% url 'mock_interview:interview_setup' %}" class="px-8 py-3.5 rounded-xl font-semibold border border-slate-500 text-slate-200 hover:border-teal-300 hover:text-teal-200 transition-colors inline-flex items-center justify-center">
        <i class="ri-mic-line mr-2"></i>Try AI Interview
      </a>
    </div>
  </section>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // GSAP Timeline for Hero section
    const tl = gsap.timeline({ defaults: { ease: "power4.out", duration: 1.2 }});
    
    tl.to(".reveal-text", {
      opacity: 1,
      y: 0,
      stagger: 0.2
    })
    .to(".reveal-card", {
      opacity: 1,
      scale: 1,
      stagger: 0.1,
      duration: 1
    }, "-=0.8");

    // Scroll Trigger for cards
    gsap.utils.toArray(".home-card").forEach(card => {
      gsap.to(card, {
        scrollTrigger: {
          trigger: card,
          start: "top 90%",
          toggleActions: "play none none reverse"
        },
        opacity: 1,
        y: 0,
        scale: 1,
        duration: 0.8,
        ease: "power2.out"
      });
    });

    // Career Console Typing Effect
    const consoleElement = document.getElementById('careerConsole');
    const messages = [
      "> Scanning active problems...",
      "> Found {{ stats.total_problems }} code + {{ stats.total_questions }} logic challenges.",
      "> Checking target companies...",
      "> Analysis complete: Optimize for Recursion.",
      "> System ready. Awaiting user input."
    ];
    let msgIndex = 0;
    
    function typeConsole() {
      if (msgIndex < messages.length) {
        const line = document.createElement('div');
        line.className = 'console-line mb-1';
        consoleElement.appendChild(line);
        
        let charIndex = 0;
        const speed = 40;
        
        function typeChar() {
          if (charIndex < messages[msgIndex].length) {
            line.textContent += messages[msgIndex].charAt(charIndex);
            charIndex++;
            setTimeout(typeChar, speed);
          } else {
            msgIndex++;
            setTimeout(typeConsole, 1000);
          }
        }
        typeChar();
      }
    }
    
    setTimeout(typeConsole, 2500);
  });
</script>
{% endblock %}
